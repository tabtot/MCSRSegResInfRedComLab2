
================================================================================
  TESTE DE RESILI√äNCIA - RTO (Arquitetura Backend + Gateway)
================================================================================

[0;34m[INFO][0m Servi√ßo Backend: resiliencia_web-backend (workers)
[0;34m[INFO][0m Servi√ßo Gateway: resiliencia_web-gateway (manager)
[0;34m[INFO][0m Gateway URL: http://192.168.1.70:8080
[0;34m[INFO][0m Data/Hora: 2026-01-03 13:23:24 WET


================================================================================
  FASE 1: Verifica√ß√£o do Estado Inicial
================================================================================

[0;34m[INFO][0m Verificando servi√ßos...
[0;32m[‚úì][0m Servi√ßo backend encontrado: resiliencia_web-backend
[0;32m[‚úì][0m Servi√ßo gateway encontrado: resiliencia_web-gateway

[0;34m[INFO][0m R√©plicas backend (workers): 3/3
[0;34m[INFO][0m R√©plicas gateway (manager): 1/1

[0;34m[INFO][0m Estado detalhado das r√©plicas BACKEND:
ID             NAME                        NODE      CURRENT STATE
bi4w7fwstcls   resiliencia_web-backend.1   worker2   Running 4 minutes ago
i585bsbynr97   resiliencia_web-backend.2   worker3   Running 4 minutes ago
up6jbrzy6cph   resiliencia_web-backend.3   worker1   Running 4 minutes ago

[0;34m[INFO][0m Estado do GATEWAY:
ID             NAME                        NODE      CURRENT STATE
z4a61zaobtqe   resiliencia_web-gateway.1   teety     Running 4 minutes ago

[0;34m[INFO][0m Testando acesso ao gateway...
[0;32m[‚úì][0m Gateway est√° ACESS√çVEL em http://192.168.1.70:8080

================================================================================
  FASE 2: Sele√ß√£o da R√©plica Backend para Simula√ß√£o de Falha
================================================================================

[0;34m[INFO][0m Tasks backend dispon√≠veis: 3
[0;34m[INFO][0m Task backend selecionada:
[0;34m[INFO][0m   - Task ID: bi4w7fwstclszkilc6t28ov1t
[0;34m[INFO][0m   - Task Name: resiliencia_web-backend.1
[0;34m[INFO][0m   - Node: worker2
[1;33m[‚ö†][0m Container n√£o acess√≠vel localmente (est√° em worker)
[0;34m[INFO][0m Ser√° usado m√©todo alternativo (scaling)

================================================================================
  FASE 3: Coleta de Logs Antes da Falha
================================================================================

[0;34m[INFO][0m Coletando logs do backend...
[0;34m[INFO][0m Coletando logs do gateway...
[0;32m[‚úì][0m Coletados 0 linhas do backend
[0;32m[‚úì][0m Coletados 0 linhas do gateway
[0;34m[INFO][0m Logs salvos em: ./logs/logs_20260103_132324.txt

================================================================================
  FASE 4: Simula√ß√£o de Falha do Container Backend
================================================================================

[1;33m[‚ö†][0m Preparando para simular falha no BACKEND...
[0;34m[INFO][0m IMPORTANTE: O gateway deve continuar acess√≠vel durante toda a falha!
[0;34m[INFO][0m Timestamp da falha: 2026-01-03 13:23:26.504

[0;34m[INFO][0m M√©todo: For√ßando recria√ß√£o via scaling
[1;33m[‚ö†][0m Executando: scale down/up do backend
[0;32m[‚úì][0m Scaling do backend executado


================================================================================
  FASE 5: Monitoramento da Recupera√ß√£o + Disponibilidade do Gateway
================================================================================

[0;34m[INFO][0m Monitorando recupera√ß√£o do backend...
[0;34m[INFO][0m Testando disponibilidade cont√≠nua do gateway...
[0;34m[INFO][0m Aguardando que todas as 3 r√©plicas backend voltem ao estado Running...



================================================================================
  FASE 6: C√°lculo do RTO e An√°lise de Disponibilidade
================================================================================

[0;32m[‚úì][0m BACKEND RECUPERADO COM SUCESSO!

[0;34m[INFO][0m Timestamp de falha:      2026-01-03 13:23:26.504
[0;34m[INFO][0m Timestamp de recupera√ß√£o: 2026-01-03 13:23:47.010

[0;32m[‚úì][0m RTO DO BACKEND: 20.51 segundos

[1;33m[‚ö†][0m Avalia√ß√£o RTO: ACEIT√ÅVEL (20-30s)

[0;34m[INFO][0m AN√ÅLISE DE DISPONIBILIDADE DO GATEWAY:
[0;34m[INFO][0m   Total de verifica√ß√µes: 1
[0;34m[INFO][0m   Falhas detectadas: 0
[0;34m[INFO][0m   Downtime estimado: 0s

[0;32m[‚úì][0m DISPONIBILIDADE DO GATEWAY: 100.00% (100% - PERFEITO!)
[0;32m[‚úì][0m Gateway manteve-se acess√≠vel durante TODA a falha do backend!

================================================================================
  FASE 7: Coleta de Logs e Eventos P√≥s-Falha
================================================================================

[0;34m[INFO][0m Coletando logs p√≥s-falha do backend...
[0;34m[INFO][0m Coletando logs p√≥s-falha do gateway...
[0;32m[‚úì][0m Coletadas 8 novas linhas de logs
[0;34m[INFO][0m Coletando eventos do Docker...
[0;32m[‚úì][0m Eventos salvos em: ./logs/eventos_20260103_132324.txt
[0;32m[‚úì][0m Log de disponibilidade salvo em: ./logs/availability_20260103_132324.txt

================================================================================
  FASE 8: Estado Final dos Servi√ßos
================================================================================

[0;34m[INFO][0m Estado atual do BACKEND:

ID             NAME                        NODE      CURRENT STATE           ERROR
bi4w7fwstcls   resiliencia_web-backend.1   worker2   Running 4 minutes ago   
i585bsbynr97   resiliencia_web-backend.2   worker3   Running 4 minutes ago   
i6x1bucc4xlp   resiliencia_web-backend.3   worker1   Running 8 seconds ago   

[0;34m[INFO][0m Estado do GATEWAY:
ID             NAME                        NODE      CURRENT STATE           ERROR
z4a61zaobtqe   resiliencia_web-gateway.1   teety     Running 4 minutes ago   

================================================================================
  FASE 9: Relat√≥rio Final
================================================================================


================================================================================
SUM√ÅRIO EXECUTIVO - ARQUITETURA BACKEND + GATEWAY
================================================================================

Teste:              Medi√ß√£o de RTO e Disponibilidade
Data/Hora:          2026-01-03 13:23:47 WET

CONFIGURA√á√ÉO:
-------------
Servi√ßo Backend:    resiliencia_web-backend (workers)
Servi√ßo Gateway:    resiliencia_web-gateway (manager)
Gateway URL:        http://192.168.1.70:8080
R√©plicas Backend:   3
R√©plicas Gateway:   1

RESULTADOS - BACKEND:
---------------------
R√©plicas Iniciais:  3/3
Task Alvo:          resiliencia_web-backend.1
Node:               worker2
M√©todo de Falha:    Scaling

Timestamp Falha:    2026-01-03 13:23:26.504
Timestamp Recovery: 2026-01-03 13:23:47.010
RTO Medido:         20.51 segundos

Status Final:       ‚úì SUCESSO

RESULTADOS - GATEWAY (DISPONIBILIDADE):
---------------------------------------
Total Verifica√ß√µes: 1
Falhas Detectadas:  0
Downtime:           0s
Disponibilidade:    100.00%

Avalia√ß√£o:          ‚úì PERFEITO (100%)

PROGRESSO DA RECUPERA√á√ÉO:
-------------------------
T+1s: Backend=3/3 | Gateway=UP

FICHEIROS GERADOS:
------------------
Relat√≥rio:          ./logs/relatorio_rto_20260103_132324.txt
Logs:               ./logs/logs_20260103_132324.txt
Eventos:            ./logs/eventos_20260103_132324.txt
Disponibilidade:    ./logs/availability_20260103_132324.txt

CONCLUS√ïES:
-----------
‚úì Sistema demonstrou ALTA RESILI√äNCIA:
  - Backend recuperou automaticamente em 20.51s
  - Gateway manteve 100% de disponibilidade
  - Arquitetura provou separa√ß√£o efetiva de concerns

================================================================================

================================================================================
  TESTE CONCLU√çDO
================================================================================

[0;32m[‚úì][0m Relat√≥rio completo gerado!

[0;34m[INFO][0m Ficheiros gerados:
[0;34m[INFO][0m   üìÑ Relat√≥rio:        ./logs/relatorio_rto_20260103_132324.txt
[0;34m[INFO][0m   üìã Logs:             ./logs/logs_20260103_132324.txt
[0;34m[INFO][0m   üìä Eventos:          ./logs/eventos_20260103_132324.txt
[0;34m[INFO][0m   üìà Disponibilidade:  ./logs/availability_20260103_132324.txt

[0;32m[‚úì][0m RTO: 20.51s | Disponibilidade: 100.00% ‚úì
[0;32m[‚úì][0m Sistema demonstrou ALTA RESILI√äNCIA!
